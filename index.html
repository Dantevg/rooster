<HTML>
<HEAD>
	<title>Rooster</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	
	<link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png?v=2">
	<link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png?v=2">
	<link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png?v=2">
	<link rel="manifest" href="/icons/manifest.json?v=2">
	<link rel="mask-icon" href="/icons/safari-pinned-tab.svg?v=2" color="#ff4444">
	<link rel="shortcut icon" href="/icons/favicon.ico?v=2">
	
	<meta name="msapplication-config" content="/icons/browserconfig.xml?v=2">
	<meta name="theme-color" content="#ff4444">
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
	
	<script src="/cookie.min.js"></script>
	<script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
	<script src="date.js"></script>
	<script src="format.js"></script>
	<script src="get.js"></script>
	<script type="text/javascript">
		function switchTab(tab){
			$("*[tab]").removeClass("active")
			$("*[tab="+tab+"]").addClass("active")
		}
		
		token = "262hj5klv2v084eifdpi65pj6d"
		lessons = []
		offset = 0
		defaultUser = ""
		user = ""
		
		if(typeof Cookies.get("user") == "undefined"){
			defaultUser = prompt("Vul je leerlingnummer in.\n\nMet het invullen ga je akkoord met het plaatsen van een cookie.")
			if(defaultUser!=null){
				Cookies.set( "user", defaultUser, {expires: 2190} )
			}else{
				defaultUser = "0000"
			}
		}else{
			defaultUser = Cookies.get("user")
		}
		$.get("/analytics.php", {user: defaultUser})
		user = defaultUser
		update()
		
		if( window.innerWidth < window.innerHeight ){
			$("body").addClass("mobile")
		}
		
		$(function(){
			var d = new Date()
			
			d.setDate( d.getDate() - 14 - d.getDay() + 1 )
			$("option[value=-2]").html(formatDate(d, "Twee weken terug"))
			var d = new Date()
			d.setDate( d.getDate() - 7 - d.getDay() + 1 )
			$("option[value=-1]").html(formatDate(d, "Vorige week"))
			var d = new Date()
			d.setDate( d.getDate() - d.getDay() + 1 )
			$("option[value=0]").html(formatDate(d, "Deze week"))
			var d = new Date()
			d.setDate( d.getDate() + 7 - d.getDay() + 1 )
			$("option[value=1]").html(formatDate(d, "Volgende week"))
			var d = new Date()
			d.setDate( d.getDate() + 14 - d.getDay() + 1 )
			$("option[value=2]").html(formatDate(d, "Twee weken vooruit"))
			
			$("#12h")[0].checked = ( Cookies.get("12h") == "true" )
			
			$("#week").change(function(){
				offset = Number( $("#week option:selected").val() )
				update()
			})
			$("#user").keyup(function(e){
				user = $("#user").val().toLowerCase()
				if( user == "" ){
					user = defaultUser
					if( user == "" ){
						user = "0000"
					}
				}
				lessons = []
				update()
			})
			$("#12h").change(function(){
				if( $("#12h")[0].checked ){
					Cookies.set("12h", true, {expires: 2190})
				}else{
					Cookies.set("12h", false, {expires: 2190})
				}
				formatSchedule(lessons[offset+2])
			})
			
			$("#print").click(function(){
				$(".form").css("display", "none")
				$("header").css("display", "none")
				$(".lesson span").addClass("print")
				window.print()
				$(".form").css("display", "block")
				$("header").css("display", "block")
				$(".lesson span").removeClass("print")
			})
			$("html").click(function(){
				$(".lesson").removeClass("big")
				setTimeout( function(){ $(".lesson").removeClass("top") }, 300 )
			})
			$(window).resize(function(){
				if( window.innerWidth < window.innerHeight ){
					$("body").addClass("mobile")
				}else if( window.innerWidth > window.innerHeight ){
					$("body").removeClass("mobile")
				}
			})
		})
	</script>
</HEAD>
<BODY>
	<header>
		<a class="tab active" tab="rooster" onclick="switchTab('rooster')">Rooster</a>
		<a class="tab" tab="info" onclick="switchTab('info')">Info</a>
		<a class="tab" tab="opties" onclick="switchTab('opties')">Opties</a>
		<span>v1.8</span>
		<span>Door Dante van Gemert</span>
	</header>
	
	<div tab="rooster" class="active">
		<div class="form">
			<label for="week">Week: </label>
			<select name="week" id="week">
				<option value="-2">Twee weken terug</option>
				<option value="-1">Vorige week</option>
				<option value="0" selected="selected">Deze week</option>
				<option value="1">Volgende week</option>
				<option value="2">Twee weken vooruit</option>
			</select>
			<label for="user">Leerlingnummer / docentcode: </label>
			<input type="text" name="user" id="user">
			<button id="print">Print</button>
		</div>
		
		<main>
			<div class="tijd"><span>8:30</span><span>9:30</span><span>10:30</span><span>11:30</span><span>12:30</span><span>13:30</span><span>14:30</span><span>15:30</span><span>16:30</span></div>
			<div class="dagnaam"><span>ma</span><span>di</span><span>wo</span><span>do</span><span>vr</span></div>
			<div class="rooster">
				<div class="dag dag-0"></div>
				<div class="dag dag-1"></div>
				<div class="dag dag-2"></div>
				<div class="dag dag-3"></div>
				<div class="dag dag-4"></div>
			</div>
		</main>
	</div>
	
	<div tab="info">
		<main>
			<h2>Versie <code>1.7</code> <sub><sup><sub><sup>5 december 2017</sup></sub></sup></sub></h2>
			<ul>
				<li>Lessen die vervallen, kleuren rood en de achtergrond wordt licht</li>
				<li>Bepaalde dagen kleuren mee met de dag</li>
				<li>Bij de weekkeuze staan nu het weeknummer en de datum van <b>de maandag in die week</b></li>
				<li>Het vak of het lokaal worden rood als het vak of het lokaal van deze week <b>anders is dan die van de vorige week</b></li>
				<li>Interface met versiegeschiedenis en huidige versie</li>
				<li>Goede ondersteuning voor mobiele web-app: <a href="https://www.howtogeek.com/196087/how-to-add-websites-to-the-home-screen-on-any-smartphone-or-tablet/">kijk hier hoe je websites aan je homescherm toevoegt</a>
				</ul>
				
				<h2>Versie <code>1.6</code> <sub><sup><sub><sup>12 april 2017</sup></sub></sup></sub></h2>
				<ul>
					<li>Lessen kunnen vergroot worden <b>door erop te klikken</b> (handig voor toetsweken)</li>
					<li>Vorige weken zijn nu ook zichtbaar</li>
				</ul>
			</main>
		</div>
		
		<div tab="opties">
			<main>
				24-uursklok
				<label class="switch">
					<input type="checkbox" name="12h" id="12h">
					<span></span>
				</label>
				12-uursklok
			</main>
		</div>
	</BODY>
</HTML>
